(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{O4mJ:function(e,t,c){"use strict";c.r(t),c.d(t,"CochesModule",(function(){return K}));var o=c("ofXK"),n=c("3Pt+"),r=c("tyNb");class i{constructor(e){this.coche_id=(null==e?void 0:e.coche_id)||0,this.marca=(null==e?void 0:e.marca)||"",this.modelo=(null==e?void 0:e.modelo)||"",this.color=(null==e?void 0:e.color)||"",this.potencia=(null==e?void 0:e.potencia)||0,this.puertas=(null==e?void 0:e.puertas)||0}}var l=c("fXoL"),s=c("LRne"),a=c("lJxs"),b=c("JIr8"),d=c("tk/3");let h=(()=>{class e{constructor(e){this.http=e,this.url="http://localhost:3000/api/coches"}getCoches(){return this.http.get(""+this.url).pipe(Object(a.a)(e=>e.map(e=>new i(e))),Object(b.a)(e=>(alert("No se ha podido obtener el listado de coches"),Object(s.a)([]))))}searchCoches(e){return this.http.get(`${this.url}/search?marca=${e.marca}&modelo=${e.modelo}`).pipe(Object(a.a)(e=>e.map(e=>new i(e))),Object(b.a)(e=>(alert("No se ha podido obtener el listado de coches"),Object(s.a)([]))))}getCoche(e){return this.http.get(`${this.url}/${e}`).pipe(Object(a.a)(e=>(null==e?void 0:e.length)>0?new i(e[0]):null),Object(b.a)(e=>(alert("No se ha podido obtener el coches"),Object(s.a)(null))))}deleteCoche(e){return this.http.delete(`${this.url}/${e}`).pipe(Object(b.a)(e=>(alert("No se ha podido eliminar el listado de coches"),Object(s.a)(!1))))}saveCoche(e){return e.coche_id?this.http.put(`${this.url}/${e.coche_id}`,e).pipe(Object(a.a)(e=>(null==e?void 0:e.length)>0?new i(e[0]):null),Object(b.a)(e=>(alert("No se ha podido guardar el coches"),Object(s.a)(null)))):this.http.post(""+this.url,e).pipe(Object(a.a)(e=>(null==e?void 0:e.length)>0?new i(e[0]):null),Object(b.a)(e=>(alert("No se ha podido guardar el coches"),Object(s.a)(null))))}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(d.b))},e.\u0275prov=l.Db({token:e,factory:e.\u0275fac}),e})(),u=(()=>{class e{constructor(e){this.cocheChanged=new l.n(!1),this.elFormulario=e.group({coche_id:[""],marca:["",n.m.required],modelo:["",n.m.required],color:[""],potencia:[""],puertas:[""]})}set coche(e){e&&this.elFormulario.patchValue(e)}ngOnInit(){}nuevoCoche(){this.elFormulario.reset()}guardar(e){e&&this.cocheChanged.emit(new i(e))}}return e.\u0275fac=function(t){return new(t||e)(l.Hb(n.b))},e.\u0275cmp=l.Bb({type:e,selectors:[["app-coche-form"]],inputs:{coche:"coche"},outputs:{cocheChanged:"cocheChanged"},decls:28,vars:2,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"field-element"],["type","text","formControlName","marca"],["type","text","formControlName","modelo"],["type","text","formControlName","color"],["type","number","formControlName","potencia"],["type","number","formControlName","puertas"],[1,"row-reverse"],["type","submit",1,"btn","primary",3,"disabled"],["type","button",1,"btn",3,"click"]],template:function(e,t){1&e&&(l.Kb(0,"div",0),l.Kb(1,"form",1),l.Rb("ngSubmit",(function(){return t.guardar(t.elFormulario.value)})),l.Kb(2,"div",2),l.Kb(3,"div",3),l.Kb(4,"label"),l.bc(5,"Marca"),l.Jb(),l.Ib(6,"input",4),l.Jb(),l.Kb(7,"div",3),l.Kb(8,"label"),l.bc(9,"Modelo"),l.Jb(),l.Ib(10,"input",5),l.Jb(),l.Kb(11,"div",3),l.Kb(12,"label"),l.bc(13,"Color"),l.Jb(),l.Ib(14,"input",6),l.Jb(),l.Kb(15,"div",3),l.Kb(16,"label"),l.bc(17,"Potencia"),l.Jb(),l.Ib(18,"input",7),l.Jb(),l.Kb(19,"div",3),l.Kb(20,"label"),l.bc(21,"Puertas"),l.Jb(),l.Ib(22,"input",8),l.Jb(),l.Jb(),l.Kb(23,"div",9),l.Kb(24,"button",10),l.bc(25,"Guardar"),l.Jb(),l.Kb(26,"button",11),l.Rb("click",(function(){return t.nuevoCoche()})),l.bc(27,"Nuevo"),l.Jb(),l.Jb(),l.Jb(),l.Jb()),2&e&&(l.xb(1),l.Ub("formGroup",t.elFormulario),l.xb(23),l.Ub("disabled",!t.elFormulario.valid))},directives:[n.n,n.g,n.d,n.a,n.f,n.c,n.j],styles:[".container[_ngcontent-%COMP%]{margin:20px;padding:15px;border:.5px solid silver;border-radius:5px;background-color:#e6e6fa}.row[_ngcontent-%COMP%]{display:flex;flex-flow:row;flex-wrap:wrap;margin-bottom:20px}.row-reverse[_ngcontent-%COMP%]{display:flex;flex-flow:row-reverse}.field-element[_ngcontent-%COMP%]{flex:1 1 200px;display:flex;flex-direction:column;margin-right:20px}.field-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.field-element[_ngcontent-%COMP%]   input.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:1px solid red}.field-element[_ngcontent-%COMP%]   select.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:1px solid red!important}.field-element[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red}"]}),e})();var p=c("d0Ym");let m=(()=>{class e{constructor(e,t){this.cochesModelService=e,this.router=t,this.coche=new i,this.documentType="fichaTecnica",t.params.subscribe(e=>{this.cocheId=(null==e?void 0:e.id)||null})}ngOnInit(){this.cocheId&&this.cochesModelService.getCoche(this.cocheId).subscribe(e=>{e&&(this.coche=e)})}guardar(e){e&&this.cochesModelService.saveCoche(e).subscribe(e=>{e&&(this.coche=e)})}}return e.\u0275fac=function(t){return new(t||e)(l.Hb(h),l.Hb(r.a))},e.\u0275cmp=l.Bb({type:e,selectors:[["app-coches-detail"]],decls:2,vars:3,consts:[[3,"coche","cocheChanged"],[3,"label","documentType"]],template:function(e,t){1&e&&(l.Kb(0,"app-coche-form",0),l.Rb("cocheChanged",(function(e){return t.guardar(e)})),l.Jb(),l.Ib(1,"app-ficheros",1)),2&e&&(l.Ub("coche",t.coche),l.xb(1),l.Ub("label","Selecciona una Ficha Tecnica")("documentType",t.documentType))},directives:[u,p.a],styles:[""]}),e})();class g{constructor(e){this.marca=(null==e?void 0:e.marca)||"",this.modelo=(null==e?void 0:e.modelo)||""}}let f=(()=>{class e{constructor(e){this.search=new l.n(!1),this.elFormulario=e.group({marca:[""],modelo:[""]})}ngOnInit(){}reset(){this.elFormulario.reset(),this.search.emit(new g)}searchClick(e){e&&this.search.emit(new g(e))}}return e.\u0275fac=function(t){return new(t||e)(l.Hb(n.b))},e.\u0275cmp=l.Bb({type:e,selectors:[["app-coches-filter"]],outputs:{search:"search"},decls:16,vars:1,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"field-element"],["type","text","formControlName","marca"],["type","text","formControlName","modelo"],[1,"row-reverse"],["type","submit",1,"btn","primary"],["type","button",1,"btn",3,"click"]],template:function(e,t){1&e&&(l.Kb(0,"div",0),l.Kb(1,"form",1),l.Rb("ngSubmit",(function(){return t.searchClick(t.elFormulario.value)})),l.Kb(2,"div",2),l.Kb(3,"div",3),l.Kb(4,"label"),l.bc(5,"Marca"),l.Jb(),l.Ib(6,"input",4),l.Jb(),l.Kb(7,"div",3),l.Kb(8,"label"),l.bc(9,"Modelo"),l.Jb(),l.Ib(10,"input",5),l.Jb(),l.Jb(),l.Kb(11,"div",6),l.Kb(12,"button",7),l.bc(13,"Buscar"),l.Jb(),l.Kb(14,"button",8),l.Rb("click",(function(){return t.reset()})),l.bc(15,"Reset"),l.Jb(),l.Jb(),l.Jb(),l.Jb()),2&e&&(l.xb(1),l.Ub("formGroup",t.elFormulario))},directives:[n.n,n.g,n.d,n.a,n.f,n.c],styles:[".container[_ngcontent-%COMP%]{margin:20px;padding:15px;border:.5px solid silver;border-radius:5px;background-color:#e6e6fa}.row[_ngcontent-%COMP%]{display:flex;flex-flow:row;flex-wrap:wrap;margin-bottom:20px}.row-reverse[_ngcontent-%COMP%]{display:flex;flex-flow:row-reverse}.field-element[_ngcontent-%COMP%]{flex:1 1 200px;display:flex;flex-direction:column;margin-right:20px}.field-element[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.field-element[_ngcontent-%COMP%]   input.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:1px solid red}.field-element[_ngcontent-%COMP%]   select.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:1px solid red!important}.field-element[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red}.btn[_ngcontent-%COMP%]{width:200px;margin-right:20px;height:34px;background-color:#db7093;border:none;color:#fff}.btn.primary[_ngcontent-%COMP%]{background-color:#334ec7!important;color:#fff}.btn.primary[_ngcontent-%COMP%]:disabled{background-color:grey!important}.btn[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:700}"]}),e})();function C(e,t){if(1&e){const e=l.Lb();l.Kb(0,"tr"),l.Kb(1,"td"),l.bc(2),l.Jb(),l.Kb(3,"td"),l.bc(4),l.Jb(),l.Kb(5,"td"),l.bc(6),l.Jb(),l.Kb(7,"td"),l.bc(8),l.Jb(),l.Kb(9,"td"),l.bc(10),l.Jb(),l.Kb(11,"td"),l.Kb(12,"button",3),l.Rb("click",(function(){l.Xb(e);const c=t.$implicit;return l.Tb().deleteClick(c)})),l.bc(13,"Borrar"),l.Jb(),l.Kb(14,"button",3),l.Rb("click",(function(){l.Xb(e);const c=t.$implicit;return l.Tb().editClick(c)})),l.bc(15,"Editar"),l.Jb(),l.Jb(),l.Jb()}if(2&e){const e=t.$implicit;l.xb(2),l.cc(e.marca),l.xb(2),l.cc(e.modelo),l.xb(2),l.cc(e.color),l.xb(2),l.cc(e.potencia),l.xb(2),l.cc(e.puertas)}}let v=(()=>{class e{constructor(){this.coches=[],this.delete=new l.n(!1),this.edit=new l.n(!1)}ngOnInit(){}deleteClick(e){this.delete.emit(e.coche_id)}editClick(e){this.edit.emit(e.coche_id)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Bb({type:e,selectors:[["app-coches-grid"]],inputs:{coches:"coches"},outputs:{delete:"delete",edit:"edit"},decls:21,vars:2,consts:[[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){1&e&&(l.Kb(0,"h1"),l.bc(1,"Listado de Coches"),l.Jb(),l.Kb(2,"div"),l.Kb(3,"table",0),l.Kb(4,"thead"),l.Kb(5,"tr"),l.Kb(6,"th",1),l.bc(7,"Marca"),l.Jb(),l.Kb(8,"th",1),l.bc(9,"Modelo"),l.Jb(),l.Kb(10,"th",1),l.bc(11,"Color"),l.Jb(),l.Kb(12,"th",1),l.bc(13,"Potencia"),l.Jb(),l.Kb(14,"th",1),l.bc(15,"Puertas"),l.Jb(),l.Ib(16,"th",1),l.Jb(),l.Jb(),l.Kb(17,"tbody"),l.ac(18,C,16,5,"tr",2),l.Jb(),l.Jb(),l.Kb(19,"h4"),l.bc(20),l.Jb(),l.Jb()),2&e&&(l.xb(18),l.Ub("ngForOf",t.coches),l.xb(2),l.dc("",t.coches.length," Coches"))},directives:[o.h],styles:["table[_ngcontent-%COMP%]{width:100%;border-spacing:2px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;background-color:silver;border-color:silver;text-transform:uppercase}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:rgba(216,184,184,.2);cursor:pointer}"]}),e})();function x(e,t){1&e&&l.Ib(0,"app-loading")}const O=[{path:"",component:(()=>{class e{constructor(e,t){this.cochesServices=e,this.router=t,this.coches=[],this.searching=!1}ngOnInit(){this.cargarCoches()}delete(e){e&&this.cochesServices.deleteCoche(e).subscribe(e=>{e&&(alert("El coche se ha eliminado"),this.cargarCoches())})}edit(e){e&&this.router.navigate(["/coches/coches-edit",e])}search(e){this.searching=!0,this.cochesServices.searchCoches(e).subscribe(e=>{e&&(this.coches=e),this.searching=!1})}cargarCoches(){this.searching=!0,this.cochesServices.getCoches().subscribe(e=>{e&&(this.coches=e),this.searching=!1})}}return e.\u0275fac=function(t){return new(t||e)(l.Hb(h),l.Hb(r.d))},e.\u0275cmp=l.Bb({type:e,selectors:[["app-coches"]],decls:3,vars:2,consts:[[3,"search"],[4,"ngIf"],[3,"coches","delete","edit"]],template:function(e,t){1&e&&(l.Kb(0,"app-coches-filter",0),l.Rb("search",(function(e){return t.search(e)})),l.Jb(),l.ac(1,x,1,0,"app-loading",1),l.Kb(2,"app-coches-grid",2),l.Rb("delete",(function(e){return t.delete(e)}))("edit",(function(e){return t.edit(e)})),l.Jb()),2&e&&(l.xb(1),l.Ub("ngIf",t.searching),l.xb(1),l.Ub("coches",t.coches))},directives:[f,o.i,v],styles:["app-coches-grid[_ngcontent-%COMP%]{padding:20px;display:block}"]}),e})()},{path:"coches-edit/:id",component:m},{path:"coches-edit",component:m}];let J=(()=>{class e{}return e.\u0275mod=l.Fb({type:e}),e.\u0275inj=l.Eb({factory:function(t){return new(t||e)},imports:[[r.f.forChild(O)],r.f]}),e})();var w=c("PCNd");let K=(()=>{class e{}return e.\u0275mod=l.Fb({type:e}),e.\u0275inj=l.Eb({factory:function(t){return new(t||e)},providers:[h],imports:[[o.b,J,n.k,w.a]]}),e})()}}]);